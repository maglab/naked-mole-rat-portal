extends base

block title
    title The Naked Mole-Rat Genome Resource

block content
    header.page-header
        div.container
            h1 
                | Sequence details
                small {{details.identifier}} ({{details.type.name}})
    div.page.container
        div.row
            div.col-md-12
                if details.part_of
                    div.panel.panel-defaul.panel-nmr 
                        div.panel-heading Part of {{details.part_of.identifier}} ({{details.part_of.type}})
                        div.panel-body
                            if details.part_of.genes.count > 0
                                p There are <b>{{ details.part_of.genes.count }}</b> potential gene matches.
                            p For more information consult the 
                                a(href="{% url 'annotation_details' details.part_of.identifier %}") page for {{details.part_of.identifier}} ({{details.part_of.type}}) 
                if details.genes.count > 0
                    h2 Potential Gene Matches
                    p The following genes have been identified as possible orthologs in the Naked Mole-Rat. For more details on the proocess used to obtain these please see <a href="{% url 'about_annotations' %}">this page about the annotation process</a>
                    for g in details.genes.all
                        div.panel.panel-default.panel-nmr
                            div.panel-heading
                                h3
                                    | {{g.gene.symbol}}
                                    small
                                        a(href="http://www.ensembl.org/Mus_musculus/Gene/Summary?db=core;g={{g.gene.ensembl}}")= g.gene.ensembl
                                        | &nbsp;({{g.gene.organism.common_name}})
                            div.row.panel-body
                                div.col-md-6
                                    h4 Gene Details 
                                    p= g.gene.name

                                    h4 External Links
                                    ul
                                        if g.gene.entrez_id != ''
                                            li
                                                | EntrezGene ID:
                                                a(href="http://www.ncbi.nlm.nih.gov/gene/{{g.gene.entrez_id}}")= g.gene.entrez_id
                                        if g.gene.uniprot != ''
                                            li
                                                | UniProt:
                                                a(href="http://www.uniprot.org/uniprot/?query={{g.gene.uniprot}}")= g.gene.uniprot
                                        if g.gene.unigene != ''
                                            li
                                                | UniGene:
                                                a(href="http://www.ncbi.nlm.nih.gov/UniGene/clust.cgi?ORG=Mu&CID={{g.gene.unigene}}")= g.gene.unigene
                                div.col-md-6
                                    h4 
                                        | Gene match
                                        small
                                            |(Ensembl Protien ID:
                                            a(href="http://www.ensembl.org/Mus_musculus/Gene/Summary?db=core;p={{g.identifier}}")= g.identifier
                                            |, {{g.gene.organism.common_name}})
                                    table.table
                                        tr.no-top-border
                                            th Protein Percentage
                                            td {{g.protein_percentage_match}}%
                                        tr
                                            th cDNA percentage
                                            td {{g.cdna_percentage_match}}%
                                        tr
                                            th Ka/Ks Ratio
                                            td {{g.ka_ks_ratio}} (Ka = {{g.ka}}, Ks = {{g.ks}})

            div.col-md-12
                h2 Sequence 
                    small= details.type
                div.row
                    div.col-md-6
                        b Length: 
                        span {{details.sequence|length}}bp
                    div.col-md-6.text-right
                        a(href="http://genome-euro.ucsc.edu/cgi-bin/hgTracks?hgHubConnect.destUrl=..%2Fcgi-bin%2FhgTracks&clade=mammal&org=Naked+mole-rat&db=hetGla2&position={{details.position_from_identifier}}") View {{details.position_from_identifier}} on the UCSC Naked Mole-Rat Genome browser
                <pre>>{{details.identifier}}
                {{details.sequence|default:"No sequence found"}}
                </pre>

            if details.related_sequences > 0
                div.col-md-12
                    h2 Related Sequences
                    for seq in details.related_sequences.all
                        h3
                            a(href="{% url 'annotation_details' seq.identifier %}") Sequence 
                                small= seq.type
                        b Length: 
                        span {{seq.sequence|length}}bp
                        <pre>>{{seq.identifier}}
                        {{seq.sequence|default:"No sequence found"}}
                        </pre>
